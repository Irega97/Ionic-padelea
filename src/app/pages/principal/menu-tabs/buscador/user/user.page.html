<ion-header *ngIf="user">
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-back-button (click)="buttonBack()" defaultHref=""></ion-back-button>
    </ion-buttons>
    <ion-title>{{user.username}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="user">
  <ion-grid class = "ion-no-padding">
    <ion-row>
      <ion-col class = "ion-no-padding">
      <ion-avatar>
        <ion-img [src]="user.image"></ion-img>
      </ion-avatar>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-list>
          <ion-item>Correo: {{user.email}}</ion-item>
          <!-- <ion-item>Online: {{user.online}}</ion-item> -->
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-list *ngIf="friends && friends.length > 0; else noFriends">
          <ion-item *ngFor="let friend of friends" [routerLink] = "['/principal/search/user', friend.user._id]">
            <ion-avatar slot="start">
              <ion-img [src]="friend.user.image"></ion-img>
            </ion-avatar>
            <ion-label>{{friend.user.username}}</ion-label>
          </ion-item>
        </ion-list>
        <ng-template #noFriends>
          <ion-text>
            <p class ="ion-text-center">No tiene amigos</p>
          </ion-text>
        </ng-template>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <div style="text-align: center;">
          <ion-button *ngIf="user.friendStatus == -1 || user.friendStatus == 0" (click)="addFriend()" [disabled] = "solicitud">
            <ion-label *ngIf="user.friendStatus != 0"> ENVIAR SOLICITUD</ion-label>
            <ion-label *ngIf="user.friendStatus == 0">SOLICITUD ENVIADA</ion-label>
          </ion-button>
          <ion-button *ngIf= "user.friendStatus == 1" (click)="acceptFriend()" >
            <ion-label *ngIf="user.friendStatus == 1">ACEPTAR SOLICITUD</ion-label>
          </ion-button>
          <ion-button *ngIf= "user.friendStatus == 1" (click)="rejectFriend()">
            <ion-label *ngIf="user.friendStatus == 1">RECHAZAR SOLICITUD</ion-label>
          </ion-button>
          <ion-button *ngIf= "user.friendStatus == 2" (click)="deleteFriend()">
            <ion-label *ngIf="user.friendStatus == 2">ELIMINAR AMIGO</ion-label>
          </ion-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>